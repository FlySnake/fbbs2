## Назначение

Сервер сборок как continuous integration только для произвольных веток, выбираемых пользователем, а не заранее предопределённых. Помогает реализовать [feature branches workflow](https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow) в команде. 

Feature branches != continuous integration. В случае с continuous intergation процесс разработки выглядит примерно так:

1. Разработчик делает какой-то функционал в своей ветке (или даже в основной).
2. Разработчик вливает его в основную ветку и запускает сборку/деплой/автотесты на сервере continuous integration.
3. Тестировщик проверяет что влитый функционал работает и ничего не ломает.
4. Функционал идёт в релиз (например, вливается в релизную ветку).

В случае же с feature branches несколько иначе:

1. Разработчик делает какой-то функционал в своей ветке специално под этот функционал.
2. Разработчик запускает сборку/автотесты на сервере feature branches своей ветки.
3. Тестировщик проверяет полученную от разработчика сборку с новым функционалом.
4. Ветка с этим функционалом вливается в основную/релизную и ещё раз поверхностно проверяется что ничего не сломалось при мердже.

## Мотивация

Проект зародился в компании [Системные Технологии](http://www.sys4tec.com/) в команде разработки крупного мобильного приложения на C++/Qt. Полная сборка проекта на рабочих станциях занимала порядка 15 минут, так же требовалась под 2 платформы что было неудобно. Использовавшийся continuous integration частично решал проблему долгой сборки под несколько платформ, но не устраивал из-за принятого в команде feature branches workfow (невозможность выбрать произвольную ветку для сборки). Так как существующих решений найти не удалось пришлось писать своё. Проект хорошо зарекомендовал себя и со временем полностью заменил continuous integration.

## Архитектура

Сервер состоит из 2-х компонентов:

1. Управляющий хост. Веб-интерфейс и вся логика тут.
2. Воркер(ы). Связующее звено между Вашим shell-скриптом, выполняющим сборку проекта и управляющим хостом.

Воркеров может быть много на разных физических машинах. У каждого воркера есть настройки под какие платформы он умеет собирать и умеет ли выполнять автотесты (если они есть в Вашем проекте под заданную платформу). Управляющий хост предоставляет интерфейс пользователю и следит за воркерами. Когда пользователь запускает сборку, то управляющий в порядке приоритетов ищет первого свободного воркера, подходящего под выбранную конфигурацию сборки и отдаёт ему задание. Управляющий раз 4 секунды опрашивает всех воркеров на предмет их состояния. Воркеры лишь принимают задания и отчитываются о текущем состоянии.

## Возможности

1. Запуск сборки произвольной ветки из git-репозитория. 
2. Параллельная сборка на нескольких серверах (воркерах).
3. Очередь сборок (если нет свободных воркеров то задание на сборку ставится в очередь).
4. Возможность создания различных конфигураций сборки (например: release, development, test и т.д.).
5. Возможность создания различных версий для более гранулированного управления конфигурациями сборок. Например, если из одних исходников собираются разные коммерческие версии, то можно задать эти коммерческие версии и выбирать их при запуске сборки.
6. Встроенный механизм генерации номера сборки, который может использоваться в вашем приложении как номер сборки. Привязан к коммиту и ветке, т.е. будет инкрементирован только если в ветке есть новые коммиты, не зависит от платформы. Значение по умолчанию для новых веток задаётся в настройках.
7. Преобразование хэшей коммитов в ссылки на репозиторий чтобы из списка сборок быстро перейти к коммиту и посмотреть его состав. 
8. Преобразование чисел(или других символов - используется regex) в комментариях к коммиту в ссылки на систему управления проектами.
9. Отслеживание изменений в репозитории (с помощью хуков) для отображения наличия новых коммитов в ветке. Рядом с именем ветки в списке сборок будет звёздочка если в этой ветке есть новые коммиты.
10. Уведомление выбранного полььзователя об окончании сборки.
11. Запуск и визуализация результатов автотестов.

## Демо

Тут будет ссылка на демо в облаке. Пока не готово.

## Установка

Этот раздел ещё не готов. Пожалуйста, свяжитесь со мной если Вам нужна помощь с развёртыванием сервера.

## Разработка

Пожалуйста, не стесняйтесь писать автору если Вы находите проект полезным для себя, но Вам необходимы дополнительные возможности.

## Лицензия

AGPL
